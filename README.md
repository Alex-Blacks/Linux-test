# Linux-test
Развернул Ubuntu в VMWare, изучаю..
Изучаю команды:
-----------------------------------------------------------------------------------------
-----------------------------------------------------------------------------------------

pwd(Print Working Directory) - показывает в какой папке мы сейчас находимся

!! - выполнить предыдущую команду

uname - "uname -a" - выводит информацию о системе

ls(list) - выводит список папок и каталогов в данной дирректории

tree - показывает все папки а также иерархию в данной дирректории

cd - позволяет переходить в другую деррикторию. Либо полный путь, либо просто название, если нужно провалится только в следующую

cd ~ - выход в корневую директорию

cd ../ - выход на одну директорию назад

clear - очистка терминала

history - показывает историю команд


Пользователи
-----------------------------------------------------------------------------------------
w - показывает информацию об имеющихся пользователях

env - показывает переменные окружения

useradd - "sudo useradd -m -s /bin/bash имя_пользователя" - Добавляет пользователя
        
        "-m" — создать домашнюю директорию (/home/имя_пользователя)
        "-s" — задать оболочку (/bin/bash — стандартная)    
        "-d" — (опционально) указать путь к домашнему каталогу вручную      
        "-G" — добавить в дополнительные группы.

userdel - Удаляет пользователя.

passwd - изменяет пароль пользователя

groupadd - "sudo groupadd prog" - создать группу

gpasswd - добавляет пользователя в группу.

        "-a" - если не поставить, удалит из всех групп кроме добавленной.

getent group группа - просмотр группы

sudo - приставка в начале любой команды, чтобы она выполнялась от имени супер пользователя(Администратора)

su - смена пользователя

        "-" - делает полную смену пользователя

chown - "sudo chown root:alex file.txt" - поменять владельца и группу для папки или файла

chmod - "sudo chmod 6(владелец)6(группа)4(пользователь) " - меняет модификацию папки или файла. 

        "-R" говорит что вы работаете с папкой. 7-полный доступ. 6-чтение и запись. 5 - чтение и выполнение. 4 - чтение. 3 - запись и выполнение. 2 - запись. 1 - выполнение. 0 - нет прав
        Также для изменения SUID ставится в начале число "4"
        Также для изменения SGID ставится в начале число "2"
        
chgrp - "sudo chgrp whales myfile" - меняем группу у файла

Umask - изменяет набор разрешений по умолчанию

-----------------------------------------------------------------------------------------
Мониторинг процессов
-----------------------------------------------------------------------------------------
top - диспетчер задач в линуксе

        P - Сортировать по CPU
        M - Сортировать по памяти
        T - Сортировать по времени работы
        f - Изменить порядок столбцов
        W - Сохраняет конфигурацию в ~/.toprc

free - показывает информацию об используемой памяти

    "-h" переводит байты в мега\гига и т.д

ps - показывает процессы запущенные текущим пользователем

    "-aux" показывает все процессы от всех пользователей

kill - сигнал который завершает процесс.

    "-9" - для мгновенного закрытия.

nice - используется для установки приоритета для нового процесса.

renice - используется для установки приоритета для существующего процесса.

& - для запуска процесса в фоновом режиме. Если уже запустили, то Ctrl+Z b "bg"

jobs - для просмора фоновых задач

strace - показывает системные вызовы, которые делает процесс

lsof - покажет список всех открытых файлов и связанных с ними процессов

fuser - покажет информацию о процессе, который использует файл, или о пользователе файла

uptime - показывает время работы системы с момента последней перезагрузки, количество подключенных пользователей и среднюю загрузку системы за последние 1, 5 и 15 минут

iostat - отслеживает использование ЦП, а также использование диска

vmstat - отслеживает использование памяти

sudo sar - инструмент непрерывного мониторинга, который собирает, сообщает и сохраняет информацию об активности системы

        "-q" - выведет подробности с начала дня
        "-r" - выведет подробности использования памяти с начала дня
        "-P" - выведет подробности использования ЦП
        
sar -q /var/log/sysstat/sa02 - чтобы просмотреть данные за другой день. "02" - номер дня

crontab -e - "0 3 * * * find /home/alex/backups -type f -mtime +7 -name "*.tar.gz" -delete" - команда для редактирования заданий cron, данная например удаляет бекапы старше 7 дней
        
        "1" - 0-59 - Минуты
        "2" - 0-23 - Часы
        "3" - 1-31 - День месяца
        "4" - 1-12 - Месяц
        "5" - 0-7 - День недели
        

-----------------------------------------------------------------------------------------
Работа с файлами
-----------------------------------------------------------------------------------------
touch - "touch название.txt" -  создаёт файл. Нужно указывать формат.(может несколько через пробел)

nano - "nano название.txt" - редактирует файл. Если такого нет, он создаётся

mkdir - "mkdir папка" - создаёт папку

        "-p" - для создания недостающих папок, при создании нескольких 

cp(copy) - "copy название.txt папка/название.txt" - копирует файл в папку которую укажешь. После этого нужно дать название файла

mv(move) - "mv название.txt папка" - перемещает файл, в указанную папку

rm(remuve) - "rm название.txt" - удаляет файл. Если использовать "rm *" то удаляются все файлы, но не папки. "rm -rf" Также удаляет папки

apt-get install - установка репозитория программы из пакетного менеджера. Запускать от админа.

apt-get remove - удаление репозитория программы через пакетный менеджер. Запускать от админа.

apt-get upgrade - обновление всех программ.

apt-cache policy - поиск программы на ПК.

apt-cache search - поиск программы в стандартном репазитории.

wget - для скачивания

dpkg - "sudo dpkg -i 'Название файла'" - команда для работы со скачаными файлами

        "-i" - говорит, что мы устанавливаем файл

find - "find . -type f -name '' " - поиск файлов в директории. "." значит что ищем в данной директории. "-type f/d" значит что тип будет файл/директория. 

        Если вместо "-type" указать "-size" то мы будем искать по размеру 
        Если  указать функцию "-not" то мы найдем обратные данные от введёных
                "-name" значит что ищем по имени.Дальше указываем название.
                Если указать "-iname" то это значит что мы ищем имя в любом регистре
                Если указать "-perm" то это значит что мы ищем файлы по правам доступа

file - показывает формат файла

cat - выводит содержимое файла

grep - поиск символов в файлах

    "-n" функция выводит также номер строки
    "-i" функция говорит что нам не важен регистр

awk - "awk '{action}' your_file_name.txt" -  даёт выбирать данные – один или более отдельных фрагментов текста – на основе заданного критерия

journalctl - "sudo journalctl --since "10 min ago"" -  используется для запроса и отображения логов из журнала systemd, который собирает и хранит системные журналы.

        "--since "10 min ago"" — за последние 10 минут.
    
"-exec" функция объединяет несколько команд, например что после первой(например find) пойдёт вторая(например grep). Но строка тогда должна заканчиваться символами "{} +"    

sort - выводит в терминал содержимое файла с сортировкой. Если нужно сохранить, то в конце указать ">" и после этого как назвать.

    "-n" функция позволяет корректно сортировать числа
    "-r" сортировка в обратном режиме

echo "hello" > text.txt - ">" Запишет вывод в файл, если его нет он его создаст, если есть то перезапишет

       ">>" Запишет вывод в файл, если его нет он его создаст, если есть то дополнит
       "2>" Запишет вывод ошибки в файл, если его нет он его создаст, если есть то перезапишет  
       "2>>" Запишет вывод ошибки в файл, если его нет он его создаст, если есть то дополнит   
       "&>"Запишет вывод и текста и ошибки в файл, если его нет он его создаст, если есть то перезапишет 
       "&>>"Запишет вывод и текста и ошибки в файл, если его нет он его создаст, если есть то дополнит

| - служит для комбинирования комманд. Сначала выполняется то, что слева, потом это идёт как входные данные к тому что справа.

| tee - Выводит запись на экран, но при этом сохраняет его и в файл

sort < items.txt - "<" применяет команду к файлу

cut - извлекает часть текста из файла

paste - объединяет строки в файле для вывода

head - показывает первые 10 строк файла.

        "-n" - задаёт количество строк

tail - показывает последние 10 строк файла.

        "-n" - задаёт количество строк
        "-f" - позваляет наблюдать изменение строк в реальном времени

expand/ unexpand - переводит табуляцию в пробелы в файле. И обратно

join - позволяет объединять несколько файлов по общему полю

split - разделяет файл на разные файлы

tr -  позволяет переводить один набор символов в другой набор символов, например перевода всех строчных символов в прописные

uniq - удаляет дубликаты в файле. (работает только если дубликаты идут подряд, если нет, сначала отсортировать)

        "-c" - выводит количество вхождений каждой строки    
        "-u" - выводит только уникальные значения       
        "-d" - выводит только дублирующиеся значения
        
wc - показывает общее количество строк, количество слов и количество байтов.

        "-l" - выводит количество строк      
        "-w" - выводит количество слов        
        "-c" - выводит количество байтов

nl - показывает количество строк в файле.

tar - "tar cf folder.tar test" - меняет тип папки на tar. "cf" значит что мы будет создавать папку. "folder.tar" это название архива(обязательно tar).

    "-tf" функция показывает что внутри архива    
    "-xf" разархивирует архив

xz - архиватор

unxz - разархивирование формата xz

gzip - архиватор

gunzip - разархивирование формата gz

bzip2 - архиватор

bunzip2 - разархивирование формата bz

zip - "zip -r folder.zip test" - архиватор в zip, "-r" просто нужен, дальше название и папка которую нужно заархивировать

unzip - разархиватор формата zip

tar cvzf folder.gz test - Если нужно создать сразу какой-то формат без tar

        "c" - Создание
        "v" - просмотреть процесс
        "z" - заархивировать
        "f" - папку

Регулярные выражения
---
^ - "^by" - выводит строку, которая начинается с"by"

$ - "by$" - выводит строку, которая заканчивается на "by"

. - "b." - выводит все слова которые начинаются на "b"

-----------------------------------------------------------------------------------------
Работа с дисками
-----------------------------------------------------------------------------------------
sudo parted - инструмент командной строки, который поддерживает разбиение как MBR, так и GPT

select /dev/sdb2 - выбор устройства

mkpart primary 123 4567 - разделение устройства, нужно указать тип раздела, наальную и конечную точки

resize 2 1245 3456 - изменение размера раздела

sudo mkfs -t ext4 /dev/sdb2 - позволяет нам указать тип файловой системы, которую мы хотим, и где мы хотим ее создать

sudo mount -t ext4 /dev/sdb2 /mydrive - создаём точку монтирования

sudo mount UUID=130b882f-7d79-436d-a096-1e594c92bb76 /mydrive - монтирование через UUID

"sudo umount /mydrive" \ "sudo umount /dev/sdb2" - чтобы отмонтировать устройство от точки монтирования

sudo blkid - чтобы посмотреть UUID(универсальный уникальный идентификатор) блочных устройств в вашей системе

mkswap /dev/sdb2 - для инициализации областей подкачки

swapon /dev/sdb2 - включит устройство подкачки

swapoff /dev/sdb2 - удалить подкачку

dd - "dd if=/home/pete/backup.img of=/dev/sdb bs=1024 count=2" - считывает входные данные из файла или потока данных и записывает их в файл или поток данных. "bs" - сколько байтов в блоке, "count" - сколько блоко копировать

df - показывает сколько дискового пространства свободно

        "-i" - показывает сколько inodes осталось

du - показывает использование диска

sudo fsck /dev/sda - используется для проверки целостности файловой системы и даже может попытаться восстановить ее

ln somefile somelink - Создание жесткой ссылки

        "-s" - чтобы создать символическую ссылку

-----------------------------------------------------------------------------------------
Bash shell
-----------------------------------------------------------------------------------------

#!/bin/bash - обязательная первая строка в bash скриптах

bash - команда запуска bash скрипта

Оператор ">" = "-gt" | "<" = "-ls"

-----------------------------------------------------------------------------------------
Сеть
-----------------------------------------------------------------------------------------
ping - пингует адрес

        "-c" - задаёт количество

host - показывает адрес по имени

netstat - отображает сетевую статистику

ifconfig\ip addr show - показывает сетевые характеристики моего компа

rout - показывает информацию по используемым маршрутам

sudo route add -net 192.168.2.1/23 gw 10.11.12.3 - Добавить новый маршрут

sudo route del -net 192.168.2.1/23 - Удалить маршрут

ip route add 192.168.2.1/23 via 10.11.12.3 - Чтобы добавить маршрут через ip

ip route delete 192.168.2.1/23 via 10.11.12.3 - Чтобы удалить маршрут через ip

ssh - подключение по ssh

sudo ufw allow 22 - открытие порта 22

scp myfile.txt username@remotehost.com:/remote/directory - Чтобы скопировать файл с локального хоста на удаленный хост

scp username@remotehost.com:/remote/directory/myfile.txt /local/directory - Чтобы скопировать файл с удаленного хоста на локальный хост

scp -r mydir username@remotehost.com:/remote/directory - Чтобы скопировать каталог с локального хоста на удаленный хост

rsync -zvr /my/local/directory/one /my/local/directory/two - Копирование/синхронизация файлов на одном хосте

rsync /local/directory username@remotehost.com:/remote/directory - Копирование/синхронизация файлов на локальный хост с удаленного хоста

rsync username@remotehost.com:/remote/directory /local/directory - Копирование/синхронизация файлов на удаленный хост с локального хоста

        "v" - подробный вывод        
        "r" - рекурсивный обход каталогов        
        "h" - вывод в удобочитаемом формате        
        "z" - сжатие для более легкой передачи, отлично подходит для медленных соединений

python -m http.server - настраивает базовый веб-сервер, к которому вы можете получить доступ через адрес localhost. На другой машине доступ к нему в браузере с помощью: http://IP_ADDRESS:8000

sudo service nfsclient start - Запуск NFS клиента

sudo mount server:/directory /mount_directory  Настройка NFS клиента

sudo apt install samba - установка samba

sudo smbpasswd -a [username] - Установка пароля для Samba

mkdir /my/directory/to/share - Создание общей директории

sudo service smbd restart - Перезапуск службы Samba

smbclient //HOST/directory -U user - Доступ к общей папке Samba/Windows через Linux

sudo mount -t cifs servername:directory mountpoint -o user=username,pass=password - Подключение общей папки Samba к системе

ifconfig eth0 192.168.2.1 netmask 255.255.255.0 up - Чтобы создать интерфейс и поднять его

ip link show - Чтобы показать информацию об интерфейсе для всех интерфейсов

ip -s link show eth0 - Чтобы показать статистику интерфейса

ip address show - Чтобы показать IP-адреса, назначенные интерфейсам

ip link set eth0 up/down - Чтобы поднять и опустить интерфейсы

ip address add 192.168.1.1/24 dev eth0 - Чтобы добавить IP-адрес к интерфейсу

sudo dhclient - Для получения нового IP-адреса DHCP

nm-tool - сообщает о состоянии NetworkManager и его устройств

nmcli - позволяет управлять и изменять NetworkManager

arp - показывает локально сохраненный ARP-кэш в системе

ip neighbour show - ARP-кэш через ip

sudo tcpdump -i wlan0 - Захват данных пакетов на интерфейсе

sudo tcpdump -w /some/file - Запись вывода tcpdump в файл

dig - мощный инструмент для получения информации о DNS-серверах имен

